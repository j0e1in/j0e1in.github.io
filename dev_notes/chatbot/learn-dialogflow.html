<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Learn Dialogflow | Joe Lin</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.c36325bf.css" as="style"><link rel="preload" href="/assets/js/app.e04e06c7.js" as="script"><link rel="preload" href="/assets/js/11.3950009d.js" as="script"><link rel="prefetch" href="/assets/js/8.42ea1d9b.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.e47c214c.js"><link rel="prefetch" href="/assets/js/2.ca61bc24.js"><link rel="prefetch" href="/assets/js/3.7c27b296.js"><link rel="prefetch" href="/assets/js/4.61a94b53.js"><link rel="prefetch" href="/assets/js/5.9fd63af5.js"><link rel="prefetch" href="/assets/js/6.57f14f08.js"><link rel="prefetch" href="/assets/js/7.0f4a11df.js"><link rel="prefetch" href="/assets/js/9.91201f3b.js"><link rel="prefetch" href="/assets/js/10.d18985b9.js"><link rel="prefetch" href="/assets/js/12.44aeca04.js"><link rel="prefetch" href="/assets/js/13.6e946f62.js"><link rel="prefetch" href="/assets/js/14.a435ff09.js"><link rel="prefetch" href="/assets/js/15.da8d70ff.js"><link rel="prefetch" href="/assets/js/16.77bf496d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c36325bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Joe Lin
    </span></a><div class="links"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">DevNotes</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/dev_notes/chatbot/" class="nav-link router-link-active">Chatbot</a></li><li class="dropdown-item"><!----><a href="/dev_notes/ml/" class="nav-link">Machine Learning</a></li></ul></div></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">DevNotes</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/dev_notes/chatbot/" class="nav-link router-link-active">Chatbot</a></li><li class="dropdown-item"><!----><a href="/dev_notes/ml/" class="nav-link">Machine Learning</a></li></ul></div></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>Chatbot</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/dev_notes/chatbot/" class="sidebar-link">Chatbot</a></li><li><a href="/dev_notes/chatbot/learn-dialogflow.html" class="active sidebar-link">Learn Dialogflow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#entities" class="sidebar-link">Entities</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#enum" class="sidebar-link">Enum</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#composite" class="sidebar-link">Composite</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#allow-automated-expansion" class="sidebar-link">Allow Automated Expansion</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#intents" class="sidebar-link">Intents</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#context" class="sidebar-link">Context</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#event" class="sidebar-link">Event</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#training-phrases" class="sidebar-link">Training Phrases</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#actions-and-parameters" class="sidebar-link">Actions and Parameters</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#responses" class="sidebar-link">Responses</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#fulfillment" class="sidebar-link">Fulfillment</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#control-machine-learning-involvement" class="sidebar-link">Control Machine Learning Involvement</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#machine-learning-on-off" class="sidebar-link">Machine Learning On/Off</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#match-mode" class="sidebar-link">Match Mode</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#ml-classification-threshold" class="sidebar-link">ML Classification Threshold</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#pre-built-agents" class="sidebar-link">Pre-built Agents</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#small-talks" class="sidebar-link">Small Talks</a></li><li class="sidebar-sub-header"><a href="/dev_notes/chatbot/learn-dialogflow.html#build-non-linear-dialog" class="sidebar-link">Build Non-Linear Dialog</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1>Learn Dialogflow</h1><p><a href="https://dialogflow.com/" target="_blank" rel="noopener noreferrer">Dialogflow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (formerly Api.ai, a company acquired by Google in 2016) provides easy-to-use web UI for developers to create agents to handle the NLP (natural language processing) part of chatbot applications. Although its NLP ability is very limited, it is still better than most of the products on the market. Depending on requirements of your chatbot, building an agent being capable of parsing flexible user inputs still require decent amount of human effort.</p><p><img src="/images/learn-dialogflow/dialogflow-sdk-relationship.png" alt="dialogflow-sdk-relationship.png"></p><p><em><div class="caption">Dialogflow's role in a chatbot application</div></em></p><p>An agent consists of two main parts: <strong>Intents</strong> and  <strong>Entities</strong>. Intents handle how user inputs should be parsed and how the dialog should proceed. Entities are items that users can add synonyms to words that intents should match, so entities are used in Intents after defined.</p><h2 id="entities"><a href="#entities" aria-hidden="true" class="header-anchor">#</a> Entities</h2><p>The entities used in a particular agent will depend on the parameter values that are expected to be returned as a result of the agent functioning. In other words, a developer does not need to create entities for every possible concept mentioned in the agent – only for those needed for actionable data.</p><p>There are 3 types of entities: <a href="https://dialogflow.com/docs/entities#system_entities" target="_blank" rel="noopener noreferrer">system<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (defined by Dialogflow), <a href="https://dialogflow.com/docs/entities#developer_entities" target="_blank" rel="noopener noreferrer">developer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (defined by a developer), and <a href="https://dialogflow.com/docs/entities#user_entities" target="_blank" rel="noopener noreferrer">user<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (built for each individual end-user in every request) entities. Each of these can be classified as mapping (having reference values), enum (having no reference values), or composite (containing other entities with aliases and returning object type values) entities.</p><h3 id="enum"><a href="#enum" aria-hidden="true" class="header-anchor">#</a> Enum</h3><p>Enum type entities contain a set of entries that do not have mappings to reference values. Entries can contain simple words or phrases, or other entities. This can be used to match a set of parameters at once, kind of like a wrapper.</p><p>To create an enum type entity, uncheck the <strong>Define Synonyms</strong> option and add entries.</p><p><img src="/images/learn-dialogflow/entities-002.png" alt="entities-002.png"></p><p><em><div class="caption"><code>given-name</code> and <code>phone-number</code> are wrapped in a <code>contact</code> enum</div></em></p><p><strong>Extend System Entities with Enum</strong></p><p>Another useful tip is to use enum to extend system or any existing entity.</p><p><a href="https://dialogflow.com/docs/reference/system-entities" target="_blank" rel="noopener noreferrer">System entities<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> contain many useful entities that can save developers a lot of time, however, some entities are not as comprehensive as you expect or not as flexible in matching patterns as you wish. The good news is you can extend system entities by creating your own entities!</p><p>For example, users may miss type <code>dollar</code> as <code>dollor</code>, but <code>@sys.unit-currency</code> doesn't match <code>dollor</code>, you can add <code>dollor</code> as an entry in an enum type entity.</p><p><img src="/images/learn-dialogflow/extend-system-entities.png" alt="extend-system-entities.png"></p><h3 id="composite"><a href="#composite" aria-hidden="true" class="header-anchor">#</a> Composite</h3><p>When an enum type entity contains other entities and they are used with aliases, we call it a composite entity. Composite entities are most useful for describing objects or concepts that can have several different attributes.</p><p>For example, a robot's movement can have two characteristics: direction and number of steps. In order to describe all possible combinations, you first need an entity that captures the direction.</p><p><img src="/images/learn-dialogflow/entities-003a.png" alt="entities-003a.png"></p><p>Then you create a second entity that refers to the direction and the number of steps. Make sure to uncheck <strong>Define Synonyms</strong>.</p><p><img src="/images/learn-dialogflow/entities-003b.png" alt="entities-003b.png"></p><p>By providing the example <em>&quot;Move 10 steps forward&quot;</em>, the <code>@move</code> entity is annotated automatically.</p><p><img src="/images/learn-dialogflow/entities-003c.png" alt="entities-003c.png"></p><h3 id="allow-automated-expansion"><a href="#allow-automated-expansion" aria-hidden="true" class="header-anchor">#</a> Allow Automated Expansion</h3><p>This feature of developer mapping entities allows an agent to recognize values that have not been explicitly listed in the entity.</p><p>For example, consider a shopping list with items to buy:</p><p><img src="/images/learn-dialogflow/entities-006.png" alt="entities-006.png"></p><p>If a user says &quot;I need to buy some vegetables&quot;, &quot;vegetables&quot; will be picked up as a value, even though it's not included in the <code>@item</code> entity. With Automated Expansion enabled, the NLU sees the user's query is similar to the Training Phrases provided in the intent and can pick out what should be extracted as a new value.</p><h2 id="intents"><a href="#intents" aria-hidden="true" class="header-anchor">#</a> Intents</h2><p>Intent is the core of Dialogflow, it provides flexible and robust dialog design tool for its users, so it can be a little overwhelming at first if you have no prior experience on building natural language based applications. Intents contain six parts:</p><h3 id="context"><a href="#context" aria-hidden="true" class="header-anchor">#</a> Context</h3><p>Designed for passing on information from previous conversations or external sources (e.g., user profile, device information, etc). Also, they can be used to manage conversation flow. It represents the current context of a user's request. This is helpful for differentiating phrases which may be vague or have different meanings depending on the user’s preferences, geographic location, the current page in an app, or the topic of conversation.</p><p><img src="/images/learn-dialogflow/dialogflow-contexts.png" alt="dialogflow-contexts.png"></p><p><em><div class="caption">When this intent is triggered by the phrase &quot;Turn on the front porch light&quot;, context &quot;front-porch-light&quot; will be kept for the next input or a defined period of time.</div></em></p><h3 id="event"><a href="#event" aria-hidden="true" class="header-anchor">#</a> Event</h3><p>Events is a feature that allows you to invoke intents by an event name instead of a user query. You can define an event name in an intent in the developer console or via the API with the help of the <a href="https://dialogflow.com/docs/reference/agent/intents" target="_blank" rel="noopener noreferrer">/intents<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> endpoint. Custom events can be triggered by sending GET or POST http requests, for details see <a href="https://dialogflow.com/docs/events" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><p><img src="/images/learn-dialogflow/dialogflow-events-menu.png" alt="dialogflow-events-menu.png"></p><h3 id="training-phrases"><a href="#training-phrases" aria-hidden="true" class="header-anchor">#</a> Training Phrases</h3><p>Training phrases is a list of possible user inputs (words or sentences) that you expect users would say to your bot to trigger this intent. Unlike many other chatbot design tools, this list doesn't have to be exhaustive, Dialogflow will handle some common phrase variations for you, but still, more comprehensive the training phrases are, more robust your chatbot is.</p><p>Training phrases can be annotated to tell Dialogflow which information (parameters) you want to extract. Annotating phrases means to specify which parameters you want to match and which entities they are belong to. Parameters may be annotated automatically if they are already defined in <strong>Actions &amp; parameters</strong>. Entities can be system predefined or custom ones.</p><p><img src="/images/learn-dialogflow/dialogflow-training-example-mode-1.png" alt="dialogflow-training-example-mode-1.png"></p><p><em><div class="caption">Annotate parameters in a phrase.</div></em></p><p><img src="/images/learn-dialogflow/parameters-006.png" alt="parameters-006.png"></p><p><em><div class="caption">Annotation can also be made using entities. <br>(Click <code>&quot;</code>  icon in the front to change it to <code>@</code>) </div></em></p><h3 id="actions-and-parameters"><a href="#actions-and-parameters" aria-hidden="true" class="header-anchor">#</a> Actions and Parameters</h3><p>An action corresponds to the step your application will take when a specific intent has been triggered by a user’s input. Actions can have parameters for extracting information from user requests.</p><p><img src="/images/learn-dialogflow/dialogflow-training-example-mode-2.png" alt="dialogflow-training-example-mode-1.png"></p><p><em><div class="caption">Add parameters to this intent. <br>If user's input doesn't contain any of required parameters, bot will ask user specifically with sentences defined in &quot;prompts&quot;.</div></em></p><p>The &quot;<strong>Is list</strong>&quot; option is appropriate for situations where a user’s input contains an enumeration, like “I would like apples, bananas, and oranges.” More on <a href="https://dialogflow.com/docs/actions-and-parameters#list" target="_blank" rel="noopener noreferrer">defining list values<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><p><img src="/images/learn-dialogflow/dialogflow-islist.png" alt="dialogflow-islist.png"></p><div class="tip custom-block"><p class="custom-block-title">Extract Original Parameter Values</p><p>You may want to extract the original value from the user’s input to give a grammatically correct response. To define a parameter that uses original input, click on the value in the “Action” table to see the <code>$parameter_value.original</code> option.</p><ul><li><p><em>From Composite Entities</em></p><p>By default, composite entities return object-type values. In order to extract string values from &quot;sub-entities&quot;, you will need to manually define parameters with the following format:</p><p><code>$composite_entity_parameter_name.subentity_alias</code></p></li><li><p><em>From Contexts</em></p><p>To refer to a parameter value contained within an active context, you will need to manually define parameters with the following format:</p><p><code>#context_name.parameter_name</code></p></li></ul><hr><p>To reference <strong>parameter values</strong>, use <code>$</code>, and to reference <strong>context values</strong>, use <code>#</code></p></div><h3 id="responses"><a href="#responses" aria-hidden="true" class="header-anchor">#</a> Responses</h3><p>Responses are the information Diaflogflow respond to users after gathering all the required parameters. Dialogflow provides these types of responses: (for detailed description on each platform see <a href="https://dialogflow.com/docs/rich-messages" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.)</p><ul><li><p>Text</p><p><img src="/images/learn-dialogflow/message-type-002.png" alt="message-type-002.png"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To add a new line in the UI, press Shift+Enter. If you <a href="https://dialogflow.com/docs/reference/agent/intents" target="_blank" rel="noopener noreferrer">create intents via the API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, use <code>\n</code> in the <a href="https://dialogflow.com/docs/reference/agent/intents#intent_json_object" target="_blank" rel="noopener noreferrer">intent object<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div></li><li><p>Image</p><p><img src="/images/learn-dialogflow/message-type-003.png" alt="message-type-003.png"></p></li><li><p>Card</p><p><img src="/images/learn-dialogflow/message-type-004.png" alt="message-type-004.png"></p></li><li><p>Quick replies</p><p><img src="/images/learn-dialogflow/message-type-005.png" alt="message-type-005.png"></p></li><li><p>Custom payload</p><p><img src="/images/learn-dialogflow/message-type-006.png" alt="message-type-006.png"></p></li></ul><h3 id="fulfillment"><a href="#fulfillment" aria-hidden="true" class="header-anchor">#</a> Fulfillment</h3><p>Fulfillment provides a way for developers to get information extracted by Dialogflow. After an intent is fulfilled, Dialogflow sents a POST request to your endpoint and pass JSON formatted data to  your server so you can handle user's requests more dynamically.</p><p>Dialogflow currently only provides <a href="https://github.com/dialogflow/dialogflow-fulfillment-nodejs" target="_blank" rel="noopener noreferrer">Node.js Fulfillment Library<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, but you can do this in whatever language you like, here are python's fulfillment sample: <a href="https://github.com/dialogflow/fulfillment-weather-python" target="_blank" rel="noopener noreferrer">weather reporter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/dialogflow/fulfillment-translate-python" target="_blank" rel="noopener noreferrer">translator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h2 id="control-machine-learning-involvement"><a href="#control-machine-learning-involvement" aria-hidden="true" class="header-anchor">#</a> Control Machine Learning Involvement</h2><h3 id="machine-learning-on-off"><a href="#machine-learning-on-off" aria-hidden="true" class="header-anchor">#</a> Machine Learning On/Off</h3><p>You can turn off machine learning for individual intents by clicking on the options icon <em>more_vert</em> in the upper right hand corner and choose <strong>Disable ML</strong>.</p><p><img src="/images/learn-dialogflow/turnoff-ml.png" alt="turnoff-ml.png"></p><p>When Machine learning is off, the intent will be triggered only if there is an exact match between the user’s input and one of the examples provided in the Training Phrases section of the intent.</p><p>To configure the setting when creating intents via <a href="https://dialogflow.com/docs/reference/agent/intents#intent_json_object" target="_blank" rel="noopener noreferrer">/intents endpoint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, use <code>&quot;auto&quot;: true</code> for enabling machine learning or <code>&quot;auto&quot;: false</code> for disabling machine learning in the intent object.</p><h3 id="match-mode"><a href="#match-mode" aria-hidden="true" class="header-anchor">#</a> Match Mode</h3><p>Match Mode is used for matching user requests to specific intents and uses entities to extract relevant data from them. To do this, click on the gear icon <em>settings</em> for your agent, then <strong>ML Settings</strong> and choose one of the following options from the drop down menu, under <strong>Match Mode</strong>.</p><ul><li><p><strong>Hybrid (Rule-based and ML)</strong> - Is best for agents with a small number of examples in intents and/or wide use of templates syntax and composite entities.</p></li><li><p><strong>ML only</strong> - Can be used for agents with a large number of examples in intents, especially the ones using <code>@sys.any</code>or very large developer entities.</p><p><img src="/images/learn-dialogflow/match-mode.png" alt="match-mode.png"></p></li></ul><h3 id="ml-classification-threshold"><a href="#ml-classification-threshold" aria-hidden="true" class="header-anchor">#</a> ML Classification Threshold</h3><p>To filter out false positive results and still get variety in matched natural language inputs for your agent, you can tune the machine learning classification threshold. If the returned <code>&quot;score&quot;</code> value in the <a href="https://dialogflow.com/docs/reference/agent/query#get_and_post_responses" target="_blank" rel="noopener noreferrer">JSON response to a query<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is less than the threshold value, then a <a href="https://dialogflow.com/docs/intents#fallback-intents" target="_blank" rel="noopener noreferrer">fallback intent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> will be triggered or, if there are no fallback intents defined, no intent will be triggered.</p><p><img src="/images/learn-dialogflow/ml-classification-threshold.png" alt="ml-classification-threshold.png"></p><h2 id="pre-built-agents"><a href="#pre-built-agents" aria-hidden="true" class="header-anchor">#</a> Pre-built Agents</h2><p>Dialogflow provides several pre-built agents for its users to quickly spin up a relevant bot, but most of them are not comprehensive and has no built-in responses, so it's not for ten-minutes-to-production.</p><p><img src="/images/learn-dialogflow/prebuilt-001.png" alt="prebuilt-001.png"></p><h2 id="small-talks"><a href="#small-talks" aria-hidden="true" class="header-anchor">#</a> Small Talks</h2><p>Dialogflow includes an optional feature called Small Talk, which is used to provide responses to casual conversation. This feature can greatly improve a user's experience when talking to your agent.</p><p><img src="/images/learn-dialogflow/small-talk-001.png" alt="small-talk-001.png"></p><h2 id="build-non-linear-dialog"><a href="#build-non-linear-dialog" aria-hidden="true" class="header-anchor">#</a> Build Non-Linear Dialog</h2><p>Non-linear dialog or conditional dialog is a dialog with branches. Base on user's response, chatbot will choose different conversations. In Dialogflow, a branch is an intent, and if-else condition is automatically triggered base on training phrases of other intents that use a pre-defined context as input context.</p><p>First, set and output context for the entry intent:</p><p><img src="/images/learn-dialogflow/dialogs-004.png" alt="dialogs-004.png"></p><p>And then use the context as an input context:</p><p><img src="/images/learn-dialogflow/dialogs-005.png" alt="dialogs-005.png"></p><p>Here we use <code>Excellent</code> as a training phrase, so if user's response of the first bot response is <code>Excellent</code>, this intent will be triggered. The branches can grow to a large number of intents.</p><p><img src="/images/learn-dialogflow/dialogs-007.png" alt="dialogs-007.png"></p><p>Finally, remember to enable <code>Set this intent as end of conversation</code>.</p><p><img src="/images/learn-dialogflow/dialogs-008.png" alt="dialogs-008.png"></p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>For agents with more than 50 entities or more than 600 intents, you need to update the algorithm manually. To do so, click on the gear icon <em>settings</em> for your agent, then <strong>ML Settings</strong> and click the <strong>Train</strong> button.</p></div></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/dev_notes/chatbot/" class="prev router-link-active">
          Chatbot
        </a></span><!----></p></div></div></div></div>
    <script src="/assets/js/11.3950009d.js" defer></script><script src="/assets/js/app.e04e06c7.js" defer></script>
  </body>
</html>
