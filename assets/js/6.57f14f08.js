(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{178:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("h1",[s._v("Jupyter Notebook on Google Colab")]),n("p",[n("a",{attrs:{href:"https://colab.research.google.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Google Colab"),n("OutboundLink")],1),s._v(" is an excellent resource for running jupyter notebooks. It provides 4 CPUs, 16GB memory and an optional Nvidia Tesla K80 GPU for its users of up to 12-hour run time for free. Since there are plenty of tutorials on how to run your notebooks on Colab, I will only document some useful tips on working with Colab that makes it even more appealing.")]),s._m(0),s._m(1),s._m(2),n("p",[s._v("You can see that a Tesla K80 (12GB memory) is available. You can also use this to  verify tensorflow is using the GPU.")]),s._m(3),s._m(4),n("p",[s._v("Every time you open a notebook, Google starts a new docker container, so everything will be lost once the notebook tab is closed. As a result, you want to retain your training results. The good news is you can mount your Google drive as an external disk onto Colab container! Even better, you can upload dataset to Google Drive and use it directly from Colab after mounting it.")]),n("p",[s._v("To mount Google Drive, just execute following script in Colab notebook:")]),n("p",[s._v("(This section will ask for access permission to Google Drive.)")]),s._m(5),n("p",[s._v("After gaining permission, you can mount Google Drive with following script:")]),s._m(6),s._m(7),s._m(8),n("p",[s._v("If you want to upload / download files via browser, you can use Colab's python API.")]),s._m(9)])},[function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"enable-gpu-on-colab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enable-gpu-on-colab","aria-hidden":"true"}},[this._v("#")]),this._v(" Enable GPU on Colab")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("When training machine learning models, of course you want to have GPU(s). GPU can be enabled in "),t("code",[this._v("Edit > Notebook Settings")]),this._v(". Next, you want to make sure GPU is enabled.")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("# List all CPU and GPUs")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tensorflow"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("python"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("client "),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" device_lib\ndevice_lib"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("list_local_devices"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Output"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"/device:CPU:0"')]),s._v("\n device_type"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"CPU"')]),s._v("\n memory_limit"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("268435456")]),s._v("\n locality "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n incarnation"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("17407044275154012122")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"/device:GPU:0"')]),s._v("\n device_type"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"GPU"')]),s._v("\n memory_limit"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("11287966516")]),s._v("\n locality "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   bus_id"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("1")]),s._v("\n   links "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n incarnation"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("13515505613363191723")]),s._v("\n physical_device_desc"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"device: 0, name: Tesla K80, pci bus id: 0000:00:04.0, compute capability: 3.7"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" tensorflow "),n("span",{attrs:{class:"token keyword"}},[s._v("as")]),s._v(" tf\ntf"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gpu_device_name"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Output"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{attrs:{class:"token string"}},[s._v("'/device:GPU:0'")]),s._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"use-google-drive-as-data-storage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#use-google-drive-as-data-storage","aria-hidden":"true"}},[this._v("#")]),this._v(" Use Google Drive as Data Storage")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# Setup authentication to mount Google Drive\n!apt-get install -y -qq software-properties-common python-software-properties module-init-tools\n!add-apt-repository -y ppa:alessandro-strada/ppa 2>&1 > /dev/null\n!apt-get update -qq 2>&1 > /dev/null\n!apt-get -y install -qq google-drive-ocamlfuse fuse\nfrom google.colab import auth\nauth.authenticate_user()\nfrom oauth2client.client import GoogleCredentials\ncreds = GoogleCredentials.get_application_default()\nimport getpass\n!google-drive-ocamlfuse -headless -id={creds.client_id} -secret={creds.client_secret} < /dev/null 2>&1 | grep URL\nvcode = getpass.getpass()\n!echo {vcode} | google-drive-ocamlfuse -headless -id={creds.client_id} -secret={creds.client_secret}\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# Execute when running on colab\n# Mount Google Drive\n!mkdir -p drive\n!google-drive-ocamlfuse drive\n\nimport os\nos.chdir('drive/Colab Notebooks')\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("Now your working  directory is the "),t("code",[this._v("Colab Notebooks")]),this._v(" directory in your Google Drive.")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"upload-download-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#upload-download-files","aria-hidden":"true"}},[this._v("#")]),this._v(" Upload / Download Files")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" google"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("colab "),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" files\nfiles"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("download"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'file_path'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nfiles"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("upload"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("# will display an upload button")]),s._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])}],!1,null,null,null);t.default=e.exports}}]);